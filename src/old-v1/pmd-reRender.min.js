// 将Github Pages自动生成的Markdown渲染页面进行自动重绘
// Powered by SoberJS
// 自定义设置项区 详见文档：https://kdxiaoyi.top/Pages-md-reRender/global-conf
const /*文章授权协议*/conf_licen=`CC BY-NC 4.0`;
const /*文章授权协议链接*/conf_licen_link=`https://creativecommons.org/licenses/by-nc/4.0/legalcode.zh-hans`;
const /*在代码块下方添加复制代码按钮*/conf_codeCopyBtn=true;
const   /*代码块复制按钮默认文本*/conf_codeCopyBtn_tip="Copy";
const   /*代码块复制按钮点击后文本*/conf_codeCopyBtn_tip_done="Copied!";
const /*允许点击图片来查看大图*/conf_imgView=true;
const   /*启用查看大图对imgse图床的优化*/conf_imgView_imgse=true;
const   /*启用查看大图查看原图 跳转至imgse查看页而不是源文件*/conf_imgView_imgse_noRes=true;
const   /*启用查看大图查看原图按钮*/conf_imgView_open=true;
const /*启用建站时长计时 [是否启用t/f,年,月,日]*/conf_time=[false,2022,7,20];
const /*左侧边栏·一言*/conf_saying=`Keep the spirit of Touching 𝕏.`;
const /*左侧边栏·第1格·背景图片*/conf_sidebar_headimg_src=``;
const   /*左侧边栏·第1格·背景图片描述*/conf_sidebar_headimg_alt=``;
const /*左侧边栏·第2格内容*/conf_sidebar_links=`
<s-chip id="side_ship_0" onclick="openURL('/','')" clickable="true" class="sidebar_btn">
<s-icon slot="start" type="home"></s-icon>
主页 Homepage</s-chip>
<s-chip id="side_ship_1" onclick="openURL('/blogs','')" clickable="true" class="sidebar_btn">
<s-icon slot="start"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path d="M320-320h480v-120H698q-21 37-58 58.5T560-360q-42 0-79-21.5T422-440H320v120Zm240-120q34 0 57-23.5t23-56.5h160v-280H320v280h160q0 33 23.5 56.5T560-440ZM320-240q-33 0-56.5-23.5T240-320v-480q0-33 23.5-56.5T320-880h480q33 0 56.5 23.5T880-800v480q0 33-23.5 56.5T800-240H320ZM160-80q-33 0-56.5-23.5T80-160v-560h80v560h560v80H160Zm160-240h480-480Z"></path></svg></s-icon>
博客 Blog</s-chip>
<s-chip id="side_ship_2" onclick="openURL('/project','')" clickable="true" class="sidebar_btn">
<s-icon slot="start"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path d="M440-183v-274L200-596v274l240 139Zm80 0 240-139v-274L520-457v274Zm-40-343 237-137-237-137-237 137 237 137ZM160-252q-19-11-29.5-29T120-321v-318q0-22 10.5-40t29.5-29l280-161q19-11 40-11t40 11l280 161q19 11 29.5 29t10.5 40v318q0 22-10.5 40T800-252L520-91q-19 11-40 11t-40-11L160-252Zm320-228Z"></path></svg></s-icon>
项目 Project</s-chip>
<s-chip id="side_ship_3" onclick="openURL('https://space.bilibili.com/1')" clickable="true" class="sidebar_btn">
<s-icon slot="start"><svg width="100px" height="100px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g><path fill="none" d="M0 0h24v24H0z"/><path d="M18.223 3.086a1.25 1.25 0 0 1 0 1.768L17.08 5.996h1.17A3.75 3.75 0 0 1 22 9.747v7.5a3.75 3.75 0 0 1-3.75 3.75H5.75A3.75 3.75 0 0 1 2 17.247v-7.5a3.75 3.75 0 0 1 3.75-3.75h1.166L5.775 4.855a1.25 1.25 0 1 1 1.767-1.768l2.652 2.652c.079.079.145.165.198.257h3.213c.053-.092.12-.18.199-.258l2.651-2.652a1.25 1.25 0 0 1 1.768 0zm.027 5.42H5.75a1.25 1.25 0 0 0-1.247 1.157l-.003.094v7.5c0 .659.51 1.199 1.157 1.246l.093.004h12.5a1.25 1.25 0 0 0 1.247-1.157l.003-.093v-7.5c0-.69-.56-1.25-1.25-1.25zm-10 2.5c.69 0 1.25.56 1.25 1.25v1.25a1.25 1.25 0 1 1-2.5 0v-1.25c0-.69.56-1.25 1.25-1.25zm7.5 0c.69 0 1.25.56 1.25 1.25v1.25a1.25 1.25 0 1 1-2.5 0v-1.25c0-.69.56-1.25 1.25-1.25z"/></g></svg></s-icon>
Bilibili ↗</s-chip>`;
const /*左侧边栏·第2格内容中没有按文档编写请启用此项*/conf_sidebar_links_preventDefault=false;
const /*复制文本后向文本末尾添加一段文本，详见文档*/conf_copy_endnote=` ‖ 来自[%ETITLE%](%LINK%)，以${conf_licen}协议授权。`;
const   /*阻止一些简易解除复制限制脚本工作并提示用户*/conf_prenevtOnclickOverwrite=true;
const /*图片加载失败后的占位符图片*/conf_img_error_replace="https://rs.kdxiaoyi.top/res/images/load_err.svg";
const /*为所有在新标签页打开的链接添加右上箭头*/conf_link_arrow=true;
const   /*仅对含有 ↗ 或 $ 的链接生效*/conf_link_arrow_replace=true;
const   /*如果链接含有 ฿ 则将其修改为新标签页打开*/conf_link_target_replace=true;
const   /*外链图标*/conf_link_arrow_icon=`<s-icon class="newWindowOpen"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h280v80H200v560h560v-280h80v280q0 33-23.5 56.5T760-120H200Zm188-212-56-56 372-372H560v-80h280v280h-80v-144L388-332Z"></path></svg></s-icon>`;
const /*自定义边栏内容，禁用保持留空*/conf_replaceSidebar=``;
const /*启用目录统计，高级用法详见文档*/conf_index=true;
const /*启用目录索引侧栏*/conf_index_sidebar=true;
const /*在标题的最后添加一个按钮以复制链接指向这个标题*/conf_headerLinkCopyBtn=true;
const /*在页面底端增加文章脚注，为空不额外添加*/conf_footer=``;
const /*检查引用部分高级语法，详见文档*/conf_quotepro=[true,`#1A73E7`,`#FBC116`,`#E23B2E`,`#30C496`];

const PluginVer=["1.3.0",17];document.body.innerHTML=`\n  \x3c!-- Pages Markdown Re-Render --\x3e\n  \x3c!-- 页面重渲染插入代码开始 --\x3e\n  <style>\n    html, body, s-page {\n      height: 100%;\n      overflow: hidden;\n      margin: 0;\n      -webkit-tap-highlight-color: transparent;\n    }\n    #contentBG {\n      width: 100%;\n      flex-grow:1;\n      overflow: auto;\n    }\n    .sidebar_btn {\n      width:100%;\n      margin:1% 0 1% 0;\n    }\n    .sidebar_head {\n      width:100%;\n      padding: 3px 3px 3px 3px;\n      margin-bottom: 3%;\n    }\n    .page_root {\n      width:100%;height:100%;\n    }\n    @keyframes fadeIn {\n      from {opacity: 0;}\n      to {opacity: 1;}\n      }\n    .fadeIn {\n      animation-duration: 0.5s;\n      animation-fill-mode: both;\n      animation-name: fadeIn;\n    }\n    @keyframes fadeOut {\n      from {opacity: 1;}\n      to {opacity: 0;}\n      }\n    .fadeOut {\n      animation-duration: 0.5s;\n      animation-fill-mode: both;\n      animation-name: fadeOut;\n    }\n    img.processed {\n      min-width: 50%;\n      max-width: 90%;\n      min-height: 20vh;\n      max-height: 60vh;\n      margin: 0 auto;\n      display: block;\n    }\n    code.processed {}\n    .selectable {user-select:text;}\n    .unselectable {user-select:none;}\n    s-icon.newWindowOpen {height:1em;width:1em;}\n    .site-footer {\n      padding: 0 5% 0.1rem 5%;\n      text-align: right;\n      width: 100%;\n      word-wrap: break-word;\n    }\n    .sidebar_drawer {padding:5px 5px 5px 5px;}\n    s-fab {\n      position: absolute;\n      background: transparent;\n      backdrop-filter: blur(10px);\n      height: 48px;\n      width: 48px;\n      right: 3%;\n      bottom: 5%;\n      flex-shrink: 0;\n    }\n    blockquote.blockinfo {\n      color: #567482;\n      width: 100%;\n      border-style: solid;\n    }\n    blockquote.blockinfo p:nth-of-type(2) {\n      margin: 0 0 0 0;\n    }\n    blockquote.blockinfo p:last-of-type {\n      margin-bottom: .3em;\n    }\n    blockquote.blockinfo > p.blockinfo {\n      margin: .2em 0 .2em -.3em;\n      font-size: 1.1em;\n    }\n    blockquote.blockinfo p:first-of-type {\n      margin-top: .2em;\n    }\n    ul#index_links {\n      padding: 0 0 0 0;\n      margin: 0 0 0 1.2em;\n      wdith:100%;\n      list-style-type: none;\n    }\n    ul.index {\n      padding: 0 0 0 .8em;\n      list-style-type: none;\n    }\n    li.index {\n      padding: 0 0 0 0;\n    }\n    ul.index li.index::before {\n      content: "";\n      position: absolute;\n      transform: translateY(.6em) translateX(-.75em);\n      width: .2em;\n      height: .2em;\n      border-radius: 50%;\n      border: .075em solid var(--s-color-primary, black);\n    }\n    .headerProcessed {\n      text-decoration: none;\n      cursor: alias;\n    }\n    .headerProcessed:hover {\n      text-decoration: underline;\n    }\n    .headerLinkBtn {\n      height: 1rem;\n      width: 1rem;\n      transition: opacity 0.15s ease;\n      opacity: 0;\n    }\n    .headerProcessed:hover > .headerLinkBtn {\n      opacity: 1;\n    }\n  </style>\n  <s-page theme="auto" class="page_root" id="page_root">\n    <s-dialog style="display:none;" id="img_dialog" size="full">\n      <div style="padding: 24px">\n        <p id="img_dialog_p"></p>\n        <img data-ui-img="true" id="img_dialog_img" src=""></img>\n      </div>\n      <s-button id="img_dialog_open_btn" slot="action" type="text">查看原图 <s-icon class="newWindowOpen"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h280v80H200v560h560v-280h80v280q0 33-23.5 56.5T760-120H200Zm188-212-56-56 372-372H560v-80h280v280h-80v-144L388-332Z"></path></svg></s-icon></s-button>\n      <s-button id="img_dialog_btn" slot="action" type="text">关闭</s-button>\n    </s-dialog>\n    <s-appbar id="appbar">\n     \x3c!--左侧菜单按钮--\x3e\n      <s-icon-button id="sidebar_toggle_btn" type="filled-tonal" slot="navigation">\n        <s-icon type="menu"></s-icon>\n      </s-icon-button>\n     \x3c!--标题--\x3e\n      <div slot="headline" id="UIt" style="opacity:0;">  </div>\n     \x3c!--右侧按钮--\x3e\n      <s-icon-button type="outlined" class="fadeOut" style="display:none;" id="toTop" slot="action" onclick="javascript:void(0);"><s-icon type="arrow_upward"></s-icon></s-icon-button>\n    </s-appbar>\n    <s-drawer id="sidebar">\n      <div id="sidebar_left_parent" slot="start">\n        <s-scroll-view id="sidebar_left_scroll" style="max-height:100%;">\n          <div id="sidebar_left" class="sidebar_drawer">\n          \x3c!--左侧边栏内容--\x3e\n            <s-card type="" class="sidebar_head">\n              <div slot="image"><img data-ui-img="true" src="${conf_sidebar_headimg_src}"></div>\n              <div slot="headline"><span class='sidebar_username_bg'>${conf_sidebar_headimg_alt}</span></div>\n            </s-card><br>\n            <s-card type="" class="sidebar_head">${conf_sidebar_links}</s-card><br>\n            <s-card type="" class="sidebar_head" id="index_links_sidebarSlot" style="display:none;">\n              <s-fold folded="true">\n                <s-chip slot="trigger" clickable="true" class="sidebar_btn">\n                  <s-icon slot="start"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path d="M240-80q-50 0-85-35t-35-85v-560q0-50 35-85t85-35h440v640H240q-17 0-28.5 11.5T200-200q0 17 11.5 28.5T240-160h520v-640h80v720H240Zm120-240h240v-480H360v480Zm-80 0v-480h-40q-17 0-28.5 11.5T200-760v447q10-3 19.5-5t20.5-2h40Zm-80-480v487-487Z"></path></svg></s-icon>\n                  目录\n                </s-chip>\n                <div id="index_links_parent"><ul id="index_links"></ul></div>\n              </s-fold>\n            </s-card><br>\n            <s-card type="" class="sidebar_head">\n              <div id="saying" class="selectable"><center>${conf_saying}</center></div>\n              <div id="time"><center><small>Since 2022-07-19</small></center></div>\n              <div id="license"><center><small>以<a href="${conf_licen_link}">${conf_licen}</a>协议提供内容</small></center></div>\n            </s-card>\n          </div>\n        <s-scroll-view>\n      </div>\n      <div id="sidebar_right_parent" slot="end">\n        <s-scroll-view style="max-height:100%;">\n          <div id="sidebar_right" class="sidebar_drawer">\n          \x3c!--右侧边栏内容--\x3e\n          </div>\n        </s-scroll-view>\n      </div>\n      <div>\n        <s-scroll-view id="contentScroll" style="max-height:100%;"><div id="contentBG" class="selectable">\n  \x3c!-- 页面重渲染插入代码结束 --\x3e\n  `+document.body.innerHTML+`\n        <footer class="site-footer unselectable"></hr>${conf_footer}<br><small>Powered by <a href="http://github.com/kdxhub/Pages-md-reRender" target="_blank">kdxiaoyi/Pages-md-reRender</a>.</small></footer>\n        </div></s-scroll-view>\n      </div>\n    </s-drawer>\n  </s-page>\n`;const hexReg=/#(?:[0-9a-f]{3}){1,2}/i,page_root=document.getElementById("page_root"),UIt=document.getElementById("UIt"),link_a=document.createElement("a"),contentScroll=document.getElementById("contentScroll"),toTopBtn=document.getElementById("toTop"),title=document.querySelector("#contentBG > header > h1"),title_height=document.querySelector("#contentBG > header").offsetHeight-document.querySelector("#contentBG > header > h2").offsetHeight,appbar=document.getElementById("appbar"),contentBG=document.getElementById("contentBG"),content=document.getElementById("content"),timeElement=document.getElementById("time");var toTop_intervalID=-1;const img_dialog=document.getElementById("img_dialog"),img_dialog_img=document.getElementById("img_dialog_img"),img_dialog_p=document.getElementById("img_dialog_p"),sidebar=document.getElementById("sidebar"),drawer_left=document.getElementById("sidebar_left"),drawer_left_scroll=document.getElementById("sidebar_left_scroll"),drawer_left_parent=document.getElementById("sidebar_left_parent"),drawer_right=document.getElementById("sidebar_right"),drawer_right_parent=document.getElementById("sidebar_right_parent"),index_links=document.getElementById("index_links");function getQueryString(e){let t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null}function msg(e,t,n){let o={};return o.root=document.querySelector("s-page"),o.text=e,o.action=null==t?"":t,null!=n&&(o.type="error"),customElements.get("s-snackbar").show(o),console.output("创建了新的Snakbar\n"+JSON.stringify(o)),o}function debug(e){return 1==e?(document.debugging=!0,msg("调试模式已启用","了解")):(document.debugging=!1,msg("调试模式已禁用","了解")),document.debugging}console.log("%cPages Markdown Re-Render v"+PluginVer[0]+"%c["+PluginVer[1]+"%c]\nCopyright (C) 2024 kdxiaoyi. All right reserved.","color:#90BBB1;","color:#90BBB1;","color:#90BBB1;"),document.debugging=!1,console.output=function(e){document.debugging&&console.log(e)};let localReg=/(127\.0\.0\.1)|(0\.0\.0\.0)|(localhost)/i;function resetDrawerHeight(){sidebar.style.height=`${document.body.scrollHeight-appbar.offsetHeight}px`,console.output("重算s-drawer高度\nsidebar.style.height="+sidebar.offsetHeight+"px"),contentBG.style.height="initial",contentBG.style.height=`${contentBG.offsetHeight+appbar.offsetHeight}px`,console.output("修改页面真实高度\ncontentBG.style.height="+contentBG.style.height)}function refreshDrawer(){drawer_left_parent.style.display="none",drawer_right_parent.style.display="none",setTimeout(()=>{drawer_left_parent.style.display="",drawer_right_parent.style.display=""},10)}function scrollToTop(){sidebar.dismiss("end"),sidebar.dismiss(),window.location.hash="";var e=-contentScroll.scrollTop/80;-1==toTop_intervalID?(toTop_intervalID=setInterval(()=>{contentScroll.scrollBy(0,e),console.output("回顶循环#"+toTop_intervalID+"执行操作"),contentScroll.scrollTop<=0&&(clearInterval(toTop_intervalID),console.output("回顶循环#"+toTop_intervalID+"操作完成"),toTop_intervalID=-1,drawer_left_scroll.scrollTop=0)},1),console.output("创建新的回顶循环句柄#"+toTop_intervalID)):e*=1.5}function scrollToHash(e){let t=document.getElementById(e);if(!t)return msg(`不存在的章节「${e}」`,"好",!0),!1;sidebar.dismiss("end"),sidebar.dismiss();let n=t.offsetTop;for(;contentBG.offsetHeight-n<contentScroll.offsetHeight;)n-=contentScroll.offsetHeight,console.log("计算要结束滚动时滚动条的位置时滚动条超出可滚动范围");var o=(t.offsetTop-appbar.offsetHeight)/80;-1==toTop_intervalID?(toTop_intervalID=setInterval(()=>{contentScroll.scrollBy(0,o),console.output("滚动循环#"+toTop_intervalID+"执行操作"),o>=0&&contentScroll.scrollTop>=n&&(clearInterval(toTop_intervalID),console.output("滚动循环#"+toTop_intervalID+"操作完成"),toTop_intervalID=-1,openURL(`#${e}`,!0),refreshDrawer()),o<=0&&contentScroll.scrollTop<=n&&(clearInterval(toTop_intervalID),console.output("滚动循环#"+toTop_intervalID+"操作完成"),toTop_intervalID=-1,openURL(`#${e}`,!0),refreshDrawer())},1),console.output("创建新的滚动循环句柄#"+toTop_intervalID)):o*=1.5}function setUItitle(e){UIt.innerHTML=e}function openURL(e,t){link_a.target=null!=t?"_self":"_blank",link_a.href=e,link_a.click()}function refreshAppbar(){contentScroll.scrollTop/title_height<=1.5&&(UIt.style.opacity=contentScroll.scrollTop/title_height,console.output("UItitle透明度改变")),contentScroll.scrollTop>=contentScroll.offsetHeight?"fadeIn"!=toTopBtn.className&&(toTopBtn.setAttribute("onclick","scrollToTop();"),toTopBtn.setAttribute("class","fadeIn"),toTopBtn.style="",console.output("显示回顶按钮")):"fadeOut"!=toTopBtn.className&&(toTopBtn.setAttribute("onclick","javascript:void(0);"),toTopBtn.setAttribute("class","fadeOut"),toTopBtn.style="display: none;",toTopBtn.style="",console.output("隐藏回顶按钮"))}if(localReg.test(window.location.href)&&(debug(!0),msg("检测到本地调试","了解")),null!=getQueryString("debug")&&(debug(!0),msg("检测到调试命令行","了解")),toTopBtn.addEventListener("animationend",e=>{"fadeOut"==toTopBtn.className&&(toTopBtn.style="display: none;")}),contentScroll.addEventListener("scroll",refreshAppbar),conf_quotepro[0]){let e=/\[(?:@|！|!|i|x|#(?:[0-9a-f]{3}){1,2}(\$[\s\S]*)*)\]/i;document.querySelectorAll("blockquote").forEach(t=>{if(e.test(t.innerHTML)){console.output("找到一处使用了高级语法的blockquote");let n=t.innerHTML.match(e),o="";if(n.index>0&&(o=t.innerHTML[n.index-1]),"^"==o)return console.log("此blockquote高级语法已被转义"),void(t.innerHTML=t.innerHTML.slice(0,n.index-1)+t.innerHTML.slice(n.index));t.classList.add("blockinfo"),/\[i\]/.test(t.innerHTML)&&(t.style.borderColor=conf_quotepro[1],t.innerHTML=`<p class="blockinfo" style="color: ${conf_quotepro[1]};">\n          <s-icon style="color: ${conf_quotepro[1]};height: 1.2em;vertical-align: center;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path d="M440-280h80v-240h-80v240Zm40-320q17 0 28.5-11.5T520-640q0-17-11.5-28.5T480-680q-17 0-28.5 11.5T440-640q0 17 11.5 28.5T480-600Zm0 520q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"></path></svg>\n          </s-icon> Info</p>`+t.innerHTML),/\[(!|！)\]/.test(t.innerHTML)&&(t.style.borderColor=conf_quotepro[2],t.innerHTML=`<p class="blockinfo" style="color: ${conf_quotepro[2]};">\n          <s-icon style="color: ${conf_quotepro[2]};height: 1.2em;vertical-align: center;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path d="M480-280q17 0 28.5-11.5T520-320q0-17-11.5-28.5T480-360q-17 0-28.5 11.5T440-320q0 17 11.5 28.5T480-280Zm-40-160h80v-240h-80v240Zm40 360q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"></path></svg>\n          </s-icon> Notice</p>`+t.innerHTML),/\[x\]/.test(t.innerHTML)&&(t.style.borderColor=conf_quotepro[3],t.innerHTML=`<p class="blockinfo" style="color: ${conf_quotepro[3]};">\n          <s-icon style="color: ${conf_quotepro[3]};height: 1.2em;vertical-align: center;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path d="m40-120 440-760 440 760H40Zm138-80h604L480-720 178-200Zm302-40q17 0 28.5-11.5T520-280q0-17-11.5-28.5T480-320q-17 0-28.5 11.5T440-280q0 17 11.5 28.5T480-240Zm-40-120h80v-200h-80v200Zm40-100Z"></path></svg>\n          </s-icon> Warn</p>`+t.innerHTML),/\[@\]/.test(t.innerHTML)&&(t.style.borderColor=conf_quotepro[4],t.innerHTML=`<p class="blockinfo" style="color: ${conf_quotepro[4]};">\n          <s-icon style="color: ${conf_quotepro[4]};height: 1.2em;vertical-align: center;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path d="M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q65 0 123 19t107 53l-58 59q-38-24-81-37.5T480-800q-133 0-226.5 93.5T160-480q0 133 93.5 226.5T480-160q133 0 226.5-93.5T800-480q0-18-2-36t-6-35l65-65q11 32 17 66t6 70q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm-56-216L254-466l56-56 114 114 400-401 56 56-456 457Z"></path></svg>\n          </s-icon> Tip</p>`+t.innerHTML);let i=/\[#(?:[0-9a-f]{3}){1,2}(\$[\s\S]*)*\]/i;if(i.test(t.innerHTML)){let e=t.innerHTML.match(i)[0].match(hexReg)[0],n=t.innerHTML.match(i)[0].match(/(\$[\s\S]*)*/g).join("").replace(/\$/,"").slice(0,-1);t.style.borderColor=e,t.innerHTML=`<p class="blockinfo" style="color: ${e};">${n}</p>`+t.innerHTML}t.innerHTML=t.innerHTML.replace(e,"")}})}conf_replaceSidebar&&(document.getElementById("sidebar_left").innerHTML=conf_replaceSidebar,console.output("覆写sidebar内容"));let hn_last_level=1,hn_index_cache="";if(document.querySelectorAll("div#contentBG h1, div#contentBG h2, div#contentBG h3, div#contentBG h4, div#contentBG h5, div#contentBG h6").forEach(e=>{if(e.dataset.title=e.innerHTML,e.className.includes("project-tagline"))return;let t=e.tagName.replace(/\D/g,"");if(e.id)e.id;else{let t="_"+e.innerHTML;e.id=t}conf_index&&(t>hn_last_level&&(hn_index_cache+='<ul class="index">'.repeat(t-hn_last_level)),t<hn_last_level&&(hn_index_cache+="</ul>".repeat(hn_last_level-t)),hn_index_cache+=`<li class="index"><a href="javascript:scrollToHash('${e.id}');">${e.innerHTML}</a></li>`),hn_last_level=t,navigator.clipboard&&conf_headerLinkCopyBtn&&!e.className.includes("project-name")&&(e.addEventListener("click",()=>{navigator.clipboard.writeText(`${window.location.href.replace(window.location.hash,"").slice(0,-1)}#${e.id}`).then(function(){msg(`已复制指向标题「${e.dataset.title}」的链接`,"好"),console.output("Clipboard API返回「✓已写入剪贴板」")},function(){msg("没有授予剪贴板权限…","好",!0),console.output("Clipboard API返回「×无法写入剪贴板」")})}),e.classList.add("headerProcessed"),e.innerHTML+='<s-icon class="headerLinkBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path d="M680-160v-120H560v-80h120v-120h80v120h120v80H760v120h-80ZM440-280H280q-83 0-141.5-58.5T80-480q0-83 58.5-141.5T280-680h160v80H280q-50 0-85 35t-35 85q0 50 35 85t85 35h160v80ZM320-440v-80h320v80H320Zm560-40h-80q0-50-35-85t-85-35H520v-80h160q83 0 141.5 58.5T880-480Z"></path></svg></s-icon>')}),conf_index_sidebar&&(index_links.innerHTML=hn_index_cache,document.getElementById("index_links_sidebarSlot").style=""),conf_index&&document.getElementById("index_overwrite")&&(document.getElementById("index_overwrite").innerHTML=hn_index_cache),setUItitle(title.innerHTML),console.output("设置UI标题\nUItitle.innerHTML="+title.innerHTML),document.getElementById("sidebar_toggle_btn").addEventListener("click",()=>{-1===toTop_intervalID&&(window.getSelection().removeAllRanges(),sidebar.dismiss("end"),sidebar.toggle(),console.output("切换Sidebar显示"))}),resetDrawerHeight(),window.addEventListener("resize",resetDrawerHeight),window.addEventListener("hashchange",()=>{sidebar.dismiss("end"),sidebar.dismiss(),UIt.style.opacity=contentScroll.scrollTop/title_height,setTimeout(()=>{refreshDrawer(),refreshAppbar()},2)}),document.getElementById("mdRender_config")){let e=document.getElementById("mdRender_config");if(!conf_sidebar_links_preventDefault&&Math.floor(e.dataset.sideshipHide)>=0){let t=document.getElementById("side_ship_"+Math.floor(e.dataset.sideshipHide));t.setAttribute("type","filled-tonal"),t.setAttribute("clickable","false"),t.setAttribute("onclick","void(0);"),console.output("Sidebar-btn被配置Div隐藏\nside_ship_"+Math.floor(e.dataset.sideshipHide))}if(e.hasAttribute("data-title")&&(setUItitle(e.dataset.title),console.output("UItitle被覆写\nUItitle.innerHTML"+e.dataset.title)),e.dataset.redirect){let t=document.getElementById("redirectInfo");t=t?t.innerHTML:"",contentBG.innerHTML=`<div style="display: grid;width:100vw;height:100%;place-items: center;" class="unselectable" id="redirectDiv"><center style="width:100vw;"><div id="redirectTitle">正在跳转……</div><br><s-linear-progress id="redirectProcess" style="width:50%;margin: 0.2ch 0 0.2ch 0" value="0" max="100" animated="true" indeterminate="true"></s-linear-progress><br>${t}</center></div>`;const n=document.getElementById("redirectDiv");n.style.height=`${document.body.scrollHeight-2*appbar.offsetHeight}px`,window.addEventListener("resize",()=>{n.style.height=`${document.body.scrollHeight-2*appbar.offsetHeight}px`,console.output("重算redirectDiv\nredirectDiv.style.height="+n.offsetHeight+"px")}),setTimeout(()=>{document.getElementById("redirectTitle").innerHTML="✓ 已跳转",document.getElementById("redirectProcess").indeterminate=!1},1400),setTimeout(()=>{document.getElementById("redirectProcess").value=100},1600),setTimeout(()=>{openURL(e.dataset.redirect,!0)},2200),console.output("Redirect中间页模式，目标为"+e.dataset.redirect)}}function RefreshCountup(e,t,n){let o=Date.now()-new Date(e,t-1,n),i=Math.floor(o/864e5),l=Math.floor(o%864e5/36e5),r=Math.floor(o%36e5/6e4),s=Math.floor(o%6e4/1e3);timeElement.innerHTML=`<center><small>本站已建立${i}天${l}小时${r}分钟${s}秒</small></center>`}if(conf_time[0]&&!conf_replaceSidebar){var Timing_intervalID=setInterval(()=>{RefreshCountup(conf_time[1],conf_time[2],conf_time[3])},1e3);console.output("启用建站时长计时 loop#"+Timing_intervalID+`\nSince ${conf_time[1]}-${conf_time[2]}-${conf_time[3]}`)}else timeElement.remove();function selectAllTextInElement(e){let t=document.createRange();t.selectNodeContents(e);let n=window.getSelection();n.removeAllRanges(),n.addRange(t)}function copyBtnDone(e,t){console.output("CodeCopyBtn状态改变至「触发」"),e.setAttribute("type","filled-tonal");e.innerHTML;e.innerHTML=`<s-icon type="done" slot="start"></s-icon>${conf_codeCopyBtn_tip_done}`,setTimeout(()=>{e.setAttribute("type","elevated"),e.innerHTML=`<s-icon slot="start"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path d="M360-240q-33 0-56.5-23.5T280-320v-480q0-33 23.5-56.5T360-880h360q33 0 56.5 23.5T800-800v480q0 33-23.5 56.5T720-240H360Zm0-80h360v-480H360v480ZM200-80q-33 0-56.5-23.5T120-160v-560h80v560h440v80H200Zm160-240v-480 480Z"></path></svg></s-icon>${conf_codeCopyBtn_tip}`,t==window.getSelection().toString()&&(console.output("CodeCopyBtn状态改变时用户选中文本未改变，已清空"),window.getSelection().removeAllRanges()),console.output("CodeCopyBtn状态改变至「未激活」")},5e3)}function preventCopyEventOverWrite(){msg("您正在使用解除复制限制相关脚本，但请注意本站点不会限制您的复制行为，修改复制行为仅为添加版权提示尾注。","好",!0)}function openImgView(e,t,n,o,i){if(img_dialog_img.onload=null,img_dialog_img.onerror=null,"error"==i.dataset.status&&(i.dataset.status="reloading",i.src=o,console.output("尝试重新加载出错图片\nOriginSrc="+o),resetDrawerHeight()),conf_imgView&&"true"!=i.dataset.uiImg){img_dialog_img.src=e,img_dialog_img.dataset.originSrc=e;let o=e.split("/").pop().split("\\").pop();img_dialog_p.innerHTML=t?`<b><big class="selectable">${t}</big></b><br><small>${o} | </small>`:`<b><big class="selectable">${o}</big></b><br>`;let i="";return img_dialog_img.onload=function(){i=img_dialog_img.naturalHeight+"×"+img_dialog_img.naturalWidth,img_dialog_p.innerHTML+=`<small>${i} | 以<a href="${conf_licen_link}">${conf_licen}</a>协议提供</small><br><p class="selectable">${n}</p>`,console.output("imgView被打开\nimgsrc="+e+"\nimgFileName="+o+"\nimgTitle="+t+"\nimgInfo="+i)},img_dialog_img.onerror=function(){img_dialog_p.innerHTML+=`<small>无法获取图片信息 | 以<a href="${conf_licen_link}">${conf_licen}</a>协议提供</small><br><p class="selectable">${n}</p>`,console.output("imgView被打开\nimgsrc="+e+"\nimgFileName="+o+"\nimgTitle="+t+"\nimgInfo= [[获取失败]]"),img_dialog_img.onload=null,img_dialog_img.src=conf_img_error_replace},img_dialog.show(),void img_dialog.setAttribute("style","")}}conf_link_arrow&&document.querySelectorAll("a").forEach(e=>{if(conf_link_target_replace&&/\u0e3f/.test(e.innerHTML)&&(e.target="_blank",console.output("为a写入了_blank的target属性")),conf_link_arrow_replace)return e.innerHTML=e.innerHTML.replace(/[\u2197\u0024\u0e3f]/,conf_link_arrow_icon),void console.output("为a添加了外链图标 (替换模式)");/#/.test(e.src)||"_blank"!=e.target||(e.innerHTML=e.innerHTML.replace(/\u0e3f/,"")+conf_link_arrow_icon,console.output("为a添加了外链图标"))}),conf_codeCopyBtn&&document.querySelectorAll("code").forEach(e=>{if(0==e.querySelectorAll("span").length&&(!e.parentNode||"PRE"!==e.parentNode.nodeName))return;e.parentNode.parentNode.parentNode.style.margin="5px 0 5px 0",console.output("为Code添加CodeCopyBtn"),e.classList.add("processed");let t=document.createElement("s-chip");t.setAttribute("type","elevated"),t.setAttribute("class","font-default"),t.setAttribute("clickable","true"),navigator.clipboard||(t.setAttribute("clickable","false"),console.output("Clipboard API：不存在此方法")),t.innerHTML=`<s-icon slot="start"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path d="M360-240q-33 0-56.5-23.5T280-320v-480q0-33 23.5-56.5T360-880h360q33 0 56.5 23.5T800-800v480q0 33-23.5 56.5T720-240H360Zm0-80h360v-480H360v480ZM200-80q-33 0-56.5-23.5T120-160v-560h80v560h440v80H200Zm160-240v-480 480Z"></path></svg></s-icon>${conf_codeCopyBtn_tip}`,t.addEventListener("click",()=>{window.getSelection().removeAllRanges(),selectAllTextInElement(t.parentElement.querySelectorAll("code")[0]),navigator.clipboard.writeText(window.getSelection().toString()).then(function(){console.output("Clipboard API返回「✓已写入剪贴板」"),copyBtnDone(t,window.getSelection().toString())},function(){msg("没有授予剪贴板权限…","好",!0),console.output("Clipboard API返回「×无法写入剪贴板」")})}),e.parentNode.insertBefore(t,e.nextSibling)}),conf_copy_endnote&&(endnote=conf_copy_endnote.replace(/%LINK%/,window.location).replace(/%TITLE%/,UIt.innerHTML).replace(/%ETITLE%/,title.innerHTML),console.output("覆写复制操作处理\nendnote="+endnote),document.addEventListener("copy",async e=>{try{console.output("向复制文本末尾追加endnote\nOriginText="+window.getSelection().toString()),await navigator.clipboard.writeText(window.getSelection().toString()+endnote),msg(`已复制文本，请注意遵守授权协议${conf_licen}。`,"好")}catch(e){console.output("无法复制文本: "+e),msg("复制失败：无法访问剪贴板。","好",!0)}})),conf_prenevtOnclickOverwrite&&("function"!=typeof removeCopyEvent?Object.defineProperty(window,"removeCopyEvent",{value:function(){preventCopyEventOverWrite()},writable:!1}):preventCopyEventOverWrite()),document.getElementById("img_dialog_btn").addEventListener("click",()=>{img_dialog.setAttribute("style","display:none;"),img_dialog.dismiss(),console.output("imgView关闭")}),document.getElementById("img_dialog_open_btn").addEventListener("click",()=>{/ax1x\.com/.test(img_dialog_img.dataset.originSrc)&&conf_imgView_imgse_noRes?openURL("https://imgse.com/i/"+img_dialog_img.dataset.originSrc.split("/").pop().split(".")[0]):openURL(img_dialog_img.dataset.originSrc),img_dialog.setAttribute("style","display:none;"),img_dialog.dismiss(),console.output("imgView关闭（查看原图）")}),conf_imgView_open||document.getElementById("img_dialog_open_btn").remove(),document.querySelectorAll("img").forEach(e=>{e.addEventListener("load",()=>{"error"!=e.dataset.status&&(e.dataset.originSrc=e.src,e.dataset.status,resetDrawerHeight())}),e.onerror=(()=>{if("error"==e.dataset.status)return msg("坏链占位符图片加载错误，请联系站长处理","好",!0),void console.warn("错误：无法加载图片加载错误占位符图片。\n conf_img_error_replace="+conf_img_error_replace);e.dataset.status="error",e.dataset.originSrc=e.src,e.src=conf_img_error_replace,console.output("某个图片加载失败\nsrc="+e.src)}),e.classList.add("processed"),conf_imgView_imgse?e.addEventListener("click",function(){openImgView(e.dataset.originSrc.replace(/\.md\./,"."),e.title,e.alt,e.dataset.originSrc,e)}):e.addEventListener("click",function(){openImgView(e.dataset.originSrc,e.title,e.alt,e.dataset.originSrc,e)}),console.output("向img添加了imgView绑定")}),resetDrawerHeight(),document.getElementById("old_menu")&&document.getElementById("old_menu").remove();